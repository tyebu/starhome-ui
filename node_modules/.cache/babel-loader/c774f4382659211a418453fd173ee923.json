{"remainingRequest":"E:\\vue_workspace\\starhome\\node_modules\\babel-loader\\lib\\index.js!E:\\vue_workspace\\starhome\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue_workspace\\starhome\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_workspace\\starhome\\src\\components\\CountDown\\CountDown.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue_workspace\\starhome\\src\\components\\CountDown\\CountDown.vue","mtime":1573028890000},{"path":"E:\\vue_workspace\\starhome\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1574523006489},{"path":"E:\\vue_workspace\\starhome\\node_modules\\babel-loader\\lib\\index.js","mtime":1574522890346},{"path":"E:\\vue_workspace\\starhome\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1574523006489},{"path":"E:\\vue_workspace\\starhome\\node_modules\\vue-loader\\lib\\index.js","mtime":1574523010509}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CgovLwovLwovLwovLwovLwovLwpmdW5jdGlvbiBmaXhlZFplcm8odmFsKSB7CiAgcmV0dXJuIHZhbCAqIDEgPCAxMCA/ICIwIi5jb25jYXQodmFsKSA6IHZhbDsKfQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb3VudERvd24nLAogIHByb3BzOiB7CiAgICBmb3JtYXQ6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZAogICAgfSwKICAgIHRhcmdldDogewogICAgICB0eXBlOiBbRGF0ZSwgTnVtYmVyXSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBvbkVuZDogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0ZVRpbWU6ICcwJywKICAgICAgb3JpZ2luVGFyZ2V0VGltZTogMCwKICAgICAgbGFzdFRpbWU6IDAsCiAgICAgIHRpbWVyOiAwLAogICAgICBpbnRlcnZhbDogMTAwMAogICAgfTsKICB9LAogIGZpbHRlcnM6IHsKICAgIGZvcm1hdDogZnVuY3Rpb24gZm9ybWF0KHRpbWUpIHsKICAgICAgdmFyIGhvdXJzID0gNjAgKiA2MCAqIDEwMDA7CiAgICAgIHZhciBtaW51dGVzID0gNjAgKiAxMDAwOwogICAgICB2YXIgaCA9IE1hdGguZmxvb3IodGltZSAvIGhvdXJzKTsKICAgICAgdmFyIG0gPSBNYXRoLmZsb29yKCh0aW1lIC0gaCAqIGhvdXJzKSAvIG1pbnV0ZXMpOwogICAgICB2YXIgcyA9IE1hdGguZmxvb3IoKHRpbWUgLSBoICogaG91cnMgLSBtICogbWludXRlcykgLyAxMDAwKTsKICAgICAgcmV0dXJuICIiLmNvbmNhdChmaXhlZFplcm8oaCksICI6IikuY29uY2F0KGZpeGVkWmVybyhtKSwgIjoiKS5jb25jYXQoZml4ZWRaZXJvKHMpKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRUaW1lKCk7CiAgICB0aGlzLnRpY2soKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRUaW1lOiBmdW5jdGlvbiBpbml0VGltZSgpIHsKICAgICAgdmFyIGxhc3RUaW1lID0gMDsKICAgICAgdmFyIHRhcmdldFRpbWUgPSAwOwogICAgICB0aGlzLm9yaWdpblRhcmdldFRpbWUgPSB0aGlzLnRhcmdldDsKCiAgICAgIHRyeSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzLnRhcmdldCkgPT09ICdbb2JqZWN0IERhdGVdJykgewogICAgICAgICAgdGFyZ2V0VGltZSA9IHRoaXMudGFyZ2V0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0YXJnZXRUaW1lID0gbmV3IERhdGUodGhpcy50YXJnZXQpLmdldFRpbWUoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgdGFyZ2V0IHByb3AnKTsKICAgICAgfQoKICAgICAgbGFzdFRpbWUgPSB0YXJnZXRUaW1lIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIHRoaXMubGFzdFRpbWUgPSBsYXN0VGltZSA8IDAgPyAwIDogbGFzdFRpbWU7CiAgICB9LAogICAgdGljazogZnVuY3Rpb24gdGljaygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBvbkVuZCA9IHRoaXMub25FbmQ7CiAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMubGFzdFRpbWUgPCBfdGhpcy5pbnRlcnZhbCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLnRpbWVyKTsKICAgICAgICAgIF90aGlzLmxhc3RUaW1lID0gMDsKCiAgICAgICAgICBpZiAodHlwZW9mIG9uRW5kID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIG9uRW5kKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmxhc3RUaW1lIC09IF90aGlzLmludGVydmFsOwoKICAgICAgICAgIF90aGlzLnRpY2soKTsKICAgICAgICB9CiAgICAgIH0sIHRoaXMuaW50ZXJ2YWwpOwogICAgfQogIH0sCiAgYmVmb3JlVXBkYXRlOiBmdW5jdGlvbiBiZWZvcmVVcGRhdGUoKSB7CiAgICBpZiAodGhpcy5vcmlnaW5UYXJnZXRUaW1lICE9PSB0aGlzLnRhcmdldCkgewogICAgICB0aGlzLmluaXRUaW1lKCk7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOwogIH0KfTs="},{"version":3,"sources":["CountDown.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <span>\n    {{ lastTime | format }}\n  </span>\n</template>\n\n<script>\n\nfunction fixedZero (val) {\n  return val * 1 < 10 ? `0${val}` : val\n}\n\nexport default {\n  name: 'CountDown',\n  props: {\n    format: {\n      type: Function,\n      default: undefined\n    },\n    target: {\n      type: [Date, Number],\n      required: true\n    },\n    onEnd: {\n      type: Function,\n      default: () => ({})\n    }\n  },\n  data () {\n    return {\n      dateTime: '0',\n      originTargetTime: 0,\n      lastTime: 0,\n      timer: 0,\n      interval: 1000\n    }\n  },\n  filters: {\n    format (time) {\n      const hours = 60 * 60 * 1000\n      const minutes = 60 * 1000\n\n      const h = Math.floor(time / hours)\n      const m = Math.floor((time - h * hours) / minutes)\n      const s = Math.floor((time - h * hours - m * minutes) / 1000)\n      return `${fixedZero(h)}:${fixedZero(m)}:${fixedZero(s)}`\n    }\n  },\n  created () {\n    this.initTime()\n    this.tick()\n  },\n  methods: {\n    initTime () {\n      let lastTime = 0\n      let targetTime = 0\n      this.originTargetTime = this.target\n      try {\n        if (Object.prototype.toString.call(this.target) === '[object Date]') {\n          targetTime = this.target\n        } else {\n          targetTime = new Date(this.target).getTime()\n        }\n      } catch (e) {\n        throw new Error('invalid target prop')\n      }\n\n      lastTime = targetTime - new Date().getTime()\n\n      this.lastTime = lastTime < 0 ? 0 : lastTime\n    },\n    tick () {\n      const { onEnd } = this\n\n      this.timer = setTimeout(() => {\n        if (this.lastTime < this.interval) {\n          clearTimeout(this.timer)\n          this.lastTime = 0\n          if (typeof onEnd === 'function') {\n            onEnd()\n          }\n        } else {\n          this.lastTime -= this.interval\n          this.tick()\n        }\n      }, this.interval)\n    }\n  },\n  beforeUpdate () {\n    if (this.originTargetTime !== this.target) {\n      this.initTime()\n    }\n  },\n  beforeDestroy () {\n    clearTimeout(this.timer)\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/components/CountDown"}]}