{"remainingRequest":"E:\\vue_workspace\\starhome\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_workspace\\starhome\\src\\views\\form\\advancedForm\\AdvancedForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue_workspace\\starhome\\src\\views\\form\\advancedForm\\AdvancedForm.vue","mtime":1573028890000},{"path":"E:\\vue_workspace\\starhome\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1574523006489},{"path":"E:\\vue_workspace\\starhome\\node_modules\\babel-loader\\lib\\index.js","mtime":1574522890346},{"path":"E:\\vue_workspace\\starhome\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1574523006489},{"path":"E:\\vue_workspace\\starhome\\node_modules\\vue-loader\\lib\\index.js","mtime":1574523010509}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBSZXBvc2l0b3J5Rm9ybSBmcm9tICcuL1JlcG9zaXRvcnlGb3JtJwppbXBvcnQgVGFza0Zvcm0gZnJvbSAnLi9UYXNrRm9ybScKaW1wb3J0IEZvb3RlclRvb2xCYXIgZnJvbSAnQC9jb21wb25lbnRzL0Zvb3RlclRvb2xiYXInCmltcG9ydCB7IG1peGluLCBtaXhpbkRldmljZSB9IGZyb20gJ0AvdXRpbHMvbWl4aW4nCgpjb25zdCBmaWVsZExhYmVscyA9IHsKICBuYW1lOiAn5LuT5bqT5ZCNJywKICB1cmw6ICfku5PlupPln5/lkI0nLAogIG93bmVyOiAn5LuT5bqT566h55CG5ZGYJywKICBhcHByb3ZlcjogJ+WuoeaJueS6uicsCiAgZGF0ZVJhbmdlOiAn55Sf5pWI5pel5pyfJywKICB0eXBlOiAn5LuT5bqT57G75Z6LJywKICBuYW1lMjogJ+S7u+WKoeWQjScsCiAgdXJsMjogJ+S7u+WKoeaPj+i/sCcsCiAgb3duZXIyOiAn5omn6KGM5Lq6JywKICBhcHByb3ZlcjI6ICfotKPku7vkuronLAogIGRhdGVSYW5nZTI6ICfnlJ/mlYjml6XmnJ8nLAogIHR5cGUyOiAn5Lu75Yqh57G75Z6LJwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FkdmFuY2VkRm9ybScsCiAgbWl4aW5zOiBbbWl4aW4sIG1peGluRGV2aWNlXSwKICBjb21wb25lbnRzOiB7CiAgICBGb290ZXJUb29sQmFyLAogICAgUmVwb3NpdG9yeUZvcm0sCiAgICBUYXNrRm9ybQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBkZXNjcmlwdGlvbjogJ+mrmOe6p+ihqOWNleW4uOingeS6juS4gOasoeaAp+i+k+WFpeWSjOaPkOS6pOWkp+aJuemHj+aVsOaNrueahOWcuuaZr+OAgicsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBtZW1iZXJMb2FkaW5nOiBmYWxzZSwKCiAgICAgIC8vIHRhYmxlCiAgICAgIGNvbHVtbnM6IFsKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aIkOWRmOWnk+WQjScsCiAgICAgICAgICBkYXRhSW5kZXg6ICduYW1lJywKICAgICAgICAgIGtleTogJ25hbWUnLAogICAgICAgICAgd2lkdGg6ICcyMCUnLAogICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnbmFtZScgfQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICflt6Xlj7cnLAogICAgICAgICAgZGF0YUluZGV4OiAnd29ya0lkJywKICAgICAgICAgIGtleTogJ3dvcmtJZCcsCiAgICAgICAgICB3aWR0aDogJzIwJScsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICd3b3JrSWQnIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5omA5bGe6YOo6ZeoJywKICAgICAgICAgIGRhdGFJbmRleDogJ2RlcGFydG1lbnQnLAogICAgICAgICAga2V5OiAnZGVwYXJ0bWVudCcsCiAgICAgICAgICB3aWR0aDogJzQwJScsCiAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICdkZXBhcnRtZW50JyB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aTjeS9nCcsCiAgICAgICAgICBrZXk6ICdhY3Rpb24nLAogICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnb3BlcmF0aW9uJyB9CiAgICAgICAgfQogICAgICBdLAogICAgICBkYXRhOiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnMScsCiAgICAgICAgICBuYW1lOiAn5bCP5piOJywKICAgICAgICAgIHdvcmtJZDogJzAwMScsCiAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsCiAgICAgICAgICBkZXBhcnRtZW50OiAn6KGM5pS/6YOoJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAga2V5OiAnMicsCiAgICAgICAgICBuYW1lOiAn5p2O6I6JJywKICAgICAgICAgIHdvcmtJZDogJzAwMicsCiAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsCiAgICAgICAgICBkZXBhcnRtZW50OiAnSVTpg6gnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICczJywKICAgICAgICAgIG5hbWU6ICfnjovlsI/luIUnLAogICAgICAgICAgd29ya0lkOiAnMDAzJywKICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSwKICAgICAgICAgIGRlcGFydG1lbnQ6ICfotKLliqHpg6gnCiAgICAgICAgfQogICAgICBdLAoKICAgICAgZXJyb3JzOiBbXQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0IChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgfSwKICAgIG5ld01lbWJlciAoKSB7CiAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuZGF0YS5sZW5ndGgKICAgICAgdGhpcy5kYXRhLnB1c2goewogICAgICAgIGtleTogbGVuZ3RoID09PSAwID8gJzEnIDogKHBhcnNlSW50KHRoaXMuZGF0YVtsZW5ndGggLSAxXS5rZXkpICsgMSkudG9TdHJpbmcoKSwKICAgICAgICBuYW1lOiAnJywKICAgICAgICB3b3JrSWQ6ICcnLAogICAgICAgIGRlcGFydG1lbnQ6ICcnLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIGlzTmV3OiB0cnVlCiAgICAgIH0pCiAgICB9LAogICAgcmVtb3ZlIChrZXkpIHsKICAgICAgY29uc3QgbmV3RGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLmtleSAhPT0ga2V5KQogICAgICB0aGlzLmRhdGEgPSBuZXdEYXRhCiAgICB9LAogICAgc2F2ZVJvdyAocmVjb3JkKSB7CiAgICAgIHRoaXMubWVtYmVyTG9hZGluZyA9IHRydWUKICAgICAgY29uc3QgeyBrZXksIG5hbWUsIHdvcmtJZCwgZGVwYXJ0bWVudCB9ID0gcmVjb3JkCiAgICAgIGlmICghbmFtZSB8fCAhd29ya0lkIHx8ICFkZXBhcnRtZW50KSB7CiAgICAgICAgdGhpcy5tZW1iZXJMb2FkaW5nID0gZmFsc2UKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7floavlhpnlrozmlbTmiJDlkZjkv6Hmga/jgIInKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIC8vIOaooeaLn+e9kee7nOivt+axguOAgeWNoemhvyA4MDBtcwogICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgcmVzb2x2ZSh7IGxvb3A6IGZhbHNlIH0pCiAgICAgICAgfSwgODAwKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmRhdGEuZmluZChpdGVtID0+IGl0ZW0ua2V5ID09PSBrZXkpCiAgICAgICAgdGFyZ2V0LmVkaXRhYmxlID0gZmFsc2UKICAgICAgICB0YXJnZXQuaXNOZXcgPSBmYWxzZQogICAgICAgIHRoaXMubWVtYmVyTG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgdG9nZ2xlIChrZXkpIHsKICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5kYXRhLmZpbmQoaXRlbSA9PiBpdGVtLmtleSA9PT0ga2V5KQogICAgICB0YXJnZXQuX29yaWdpbmFsRGF0YSA9IHsgLi4udGFyZ2V0IH0KICAgICAgdGFyZ2V0LmVkaXRhYmxlID0gIXRhcmdldC5lZGl0YWJsZQogICAgfSwKICAgIGdldFJvd0J5S2V5IChrZXksIG5ld0RhdGEpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YQogICAgICByZXR1cm4gKG5ld0RhdGEgfHwgZGF0YSkuZmluZChpdGVtID0+IGl0ZW0ua2V5ID09PSBrZXkpCiAgICB9LAogICAgY2FuY2VsIChrZXkpIHsKICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5kYXRhLmZpbmQoaXRlbSA9PiBpdGVtLmtleSA9PT0ga2V5KQogICAgICBPYmplY3Qua2V5cyh0YXJnZXQpLmZvckVhY2goa2V5ID0+IHsgdGFyZ2V0W2tleV0gPSB0YXJnZXQuX29yaWdpbmFsRGF0YVtrZXldIH0pCiAgICAgIHRhcmdldC5fb3JpZ2luYWxEYXRhID0gdW5kZWZpbmVkCiAgICB9LAogICAgaGFuZGxlQ2hhbmdlICh2YWx1ZSwga2V5LCBjb2x1bW4pIHsKICAgICAgY29uc3QgbmV3RGF0YSA9IFsuLi50aGlzLmRhdGFdCiAgICAgIGNvbnN0IHRhcmdldCA9IG5ld0RhdGEuZmluZChpdGVtID0+IGtleSA9PT0gaXRlbS5rZXkpCiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXRbY29sdW1uXSA9IHZhbHVlCiAgICAgICAgdGhpcy5kYXRhID0gbmV3RGF0YQogICAgICB9CiAgICB9LAoKICAgIC8vIOacgOe7iOWFqOmhtemdouaPkOS6pAogICAgdmFsaWRhdGUgKCkgewogICAgICBjb25zdCB7ICRyZWZzOiB7IHJlcG9zaXRvcnksIHRhc2sgfSwgJG5vdGlmaWNhdGlvbiB9ID0gdGhpcwogICAgICBjb25zdCByZXBvc2l0b3J5Rm9ybSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICByZXBvc2l0b3J5LmZvcm0udmFsaWRhdGVGaWVsZHMoKGVyciwgdmFsdWVzKSA9PiB7CiAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIHJlamVjdChlcnIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpCiAgICAgICAgfSkKICAgICAgfSkKICAgICAgY29uc3QgdGFza0Zvcm0gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdGFzay5mb3JtLnZhbGlkYXRlRmllbGRzKChlcnIsIHZhbHVlcykgPT4gewogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICByZWplY3QoZXJyKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICAgIHJlc29sdmUodmFsdWVzKQogICAgICAgIH0pCiAgICAgIH0pCgogICAgICAvLyBjbGVhbiB0aGlzLmVycm9ycwogICAgICB0aGlzLmVycm9ycyA9IFtdCiAgICAgIFByb21pc2UuYWxsKFtyZXBvc2l0b3J5Rm9ybSwgdGFza0Zvcm1dKS50aGVuKHZhbHVlcyA9PiB7CiAgICAgICAgJG5vdGlmaWNhdGlvblsnZXJyb3InXSh7CiAgICAgICAgICBtZXNzYWdlOiAnUmVjZWl2ZWQgdmFsdWVzIG9mIGZvcm06JywKICAgICAgICAgIGRlc2NyaXB0aW9uOiBKU09OLnN0cmluZ2lmeSh2YWx1ZXMpCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIGNvbnN0IGVycm9ycyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcG9zaXRvcnkuZm9ybS5nZXRGaWVsZHNFcnJvcigpLCB0YXNrLmZvcm0uZ2V0RmllbGRzRXJyb3IoKSkKICAgICAgICBjb25zdCB0bXAgPSB7IC4uLmVycm9ycyB9CiAgICAgICAgdGhpcy5lcnJvckxpc3QodG1wKQogICAgICB9KQogICAgfSwKICAgIGVycm9yTGlzdCAoZXJyb3JzKSB7CiAgICAgIGlmICghZXJyb3JzIHx8IGVycm9ycy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmVycm9ycyA9IE9iamVjdC5rZXlzKGVycm9ycykKICAgICAgICAuZmlsdGVyKGtleSA9PiBlcnJvcnNba2V5XSkKICAgICAgICAubWFwKGtleSA9PiAoewogICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICBtZXNzYWdlOiBlcnJvcnNba2V5XVswXSwKICAgICAgICAgIGZpZWxkTGFiZWw6IGZpZWxkTGFiZWxzW2tleV0KICAgICAgICB9KSkKICAgIH0sCiAgICBzY3JvbGxUb0ZpZWxkIChmaWVsZEtleSkgewogICAgICBjb25zdCBsYWJlbE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsYWJlbFtmb3I9IiR7ZmllbGRLZXl9Il1gKQogICAgICBpZiAobGFiZWxOb2RlKSB7CiAgICAgICAgbGFiZWxOb2RlLnNjcm9sbEludG9WaWV3KHRydWUpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["AdvancedForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdvancedForm.vue","sourceRoot":"src/views/form/advancedForm","sourcesContent":["<template>\n  <div>\n    <a-card class=\"card\" title=\"仓库管理\" :bordered=\"false\">\n      <repository-form ref=\"repository\" :showSubmit=\"false\" />\n    </a-card>\n    <a-card class=\"card\" title=\"任务管理\" :bordered=\"false\">\n      <task-form ref=\"task\" :showSubmit=\"false\" />\n    </a-card>\n\n    <!-- table -->\n    <a-card>\n      <a-table\n        :columns=\"columns\"\n        :dataSource=\"data\"\n        :pagination=\"false\"\n        :loading=\"memberLoading\"\n      >\n        <template v-for=\"(col, i) in ['name', 'workId', 'department']\" :slot=\"col\" slot-scope=\"text, record\">\n          <a-input\n            :key=\"col\"\n            v-if=\"record.editable\"\n            style=\"margin: -5px 0\"\n            :value=\"text\"\n            :placeholder=\"columns[i].title\"\n            @change=\"e => handleChange(e.target.value, record.key, col)\"\n          />\n          <template v-else>{{ text }}</template>\n        </template>\n        <template slot=\"operation\" slot-scope=\"text, record\">\n          <template v-if=\"record.editable\">\n            <span v-if=\"record.isNew\">\n              <a @click=\"saveRow(record)\">添加</a>\n              <a-divider type=\"vertical\" />\n              <a-popconfirm title=\"是否要删除此行？\" @confirm=\"remove(record.key)\">\n                <a>删除</a>\n              </a-popconfirm>\n            </span>\n            <span v-else>\n              <a @click=\"saveRow(record)\">保存</a>\n              <a-divider type=\"vertical\" />\n              <a @click=\"cancel(record.key)\">取消</a>\n            </span>\n          </template>\n          <span v-else>\n            <a @click=\"toggle(record.key)\">编辑</a>\n            <a-divider type=\"vertical\" />\n            <a-popconfirm title=\"是否要删除此行？\" @confirm=\"remove(record.key)\">\n              <a>删除</a>\n            </a-popconfirm>\n          </span>\n        </template>\n      </a-table>\n      <a-button style=\"width: 100%; margin-top: 16px; margin-bottom: 8px\" type=\"dashed\" icon=\"plus\" @click=\"newMember\">新增成员</a-button>\n    </a-card>\n\n    <!-- fixed footer toolbar -->\n    <footer-tool-bar :style=\"{ width: isSideMenu() && isDesktop() ? `calc(100% - ${sidebarOpened ? 256 : 80}px)` : '100%'}\">\n      <span class=\"popover-wrapper\">\n        <a-popover title=\"表单校验信息\" overlayClassName=\"antd-pro-pages-forms-style-errorPopover\" trigger=\"click\" :getPopupContainer=\"trigger => trigger.parentNode\">\n          <template slot=\"content\">\n            <li v-for=\"item in errors\" :key=\"item.key\" @click=\"scrollToField(item.key)\" class=\"antd-pro-pages-forms-style-errorListItem\">\n              <a-icon type=\"cross-circle-o\" class=\"antd-pro-pages-forms-style-errorIcon\" />\n              <div class=\"\">{{ item.message }}</div>\n              <div class=\"antd-pro-pages-forms-style-errorField\">{{ item.fieldLabel }}</div>\n            </li>\n          </template>\n          <span class=\"antd-pro-pages-forms-style-errorIcon\" v-if=\"errors.length > 0\">\n            <a-icon type=\"exclamation-circle\" />{{ errors.length }}\n          </span>\n        </a-popover>\n      </span>\n      <a-button type=\"primary\" @click=\"validate\" :loading=\"loading\">提交</a-button>\n    </footer-tool-bar>\n  </div>\n</template>\n\n<script>\nimport RepositoryForm from './RepositoryForm'\nimport TaskForm from './TaskForm'\nimport FooterToolBar from '@/components/FooterToolbar'\nimport { mixin, mixinDevice } from '@/utils/mixin'\n\nconst fieldLabels = {\n  name: '仓库名',\n  url: '仓库域名',\n  owner: '仓库管理员',\n  approver: '审批人',\n  dateRange: '生效日期',\n  type: '仓库类型',\n  name2: '任务名',\n  url2: '任务描述',\n  owner2: '执行人',\n  approver2: '责任人',\n  dateRange2: '生效日期',\n  type2: '任务类型'\n}\n\nexport default {\n  name: 'AdvancedForm',\n  mixins: [mixin, mixinDevice],\n  components: {\n    FooterToolBar,\n    RepositoryForm,\n    TaskForm\n  },\n  data () {\n    return {\n      description: '高级表单常见于一次性输入和提交大批量数据的场景。',\n      loading: false,\n      memberLoading: false,\n\n      // table\n      columns: [\n        {\n          title: '成员姓名',\n          dataIndex: 'name',\n          key: 'name',\n          width: '20%',\n          scopedSlots: { customRender: 'name' }\n        },\n        {\n          title: '工号',\n          dataIndex: 'workId',\n          key: 'workId',\n          width: '20%',\n          scopedSlots: { customRender: 'workId' }\n        },\n        {\n          title: '所属部门',\n          dataIndex: 'department',\n          key: 'department',\n          width: '40%',\n          scopedSlots: { customRender: 'department' }\n        },\n        {\n          title: '操作',\n          key: 'action',\n          scopedSlots: { customRender: 'operation' }\n        }\n      ],\n      data: [\n        {\n          key: '1',\n          name: '小明',\n          workId: '001',\n          editable: false,\n          department: '行政部'\n        },\n        {\n          key: '2',\n          name: '李莉',\n          workId: '002',\n          editable: false,\n          department: 'IT部'\n        },\n        {\n          key: '3',\n          name: '王小帅',\n          workId: '003',\n          editable: false,\n          department: '财务部'\n        }\n      ],\n\n      errors: []\n    }\n  },\n  methods: {\n    handleSubmit (e) {\n      e.preventDefault()\n    },\n    newMember () {\n      const length = this.data.length\n      this.data.push({\n        key: length === 0 ? '1' : (parseInt(this.data[length - 1].key) + 1).toString(),\n        name: '',\n        workId: '',\n        department: '',\n        editable: true,\n        isNew: true\n      })\n    },\n    remove (key) {\n      const newData = this.data.filter(item => item.key !== key)\n      this.data = newData\n    },\n    saveRow (record) {\n      this.memberLoading = true\n      const { key, name, workId, department } = record\n      if (!name || !workId || !department) {\n        this.memberLoading = false\n        this.$message.error('请填写完整成员信息。')\n        return\n      }\n      // 模拟网络请求、卡顿 800ms\n      new Promise((resolve) => {\n        setTimeout(() => {\n          resolve({ loop: false })\n        }, 800)\n      }).then(() => {\n        const target = this.data.find(item => item.key === key)\n        target.editable = false\n        target.isNew = false\n        this.memberLoading = false\n      })\n    },\n    toggle (key) {\n      const target = this.data.find(item => item.key === key)\n      target._originalData = { ...target }\n      target.editable = !target.editable\n    },\n    getRowByKey (key, newData) {\n      const data = this.data\n      return (newData || data).find(item => item.key === key)\n    },\n    cancel (key) {\n      const target = this.data.find(item => item.key === key)\n      Object.keys(target).forEach(key => { target[key] = target._originalData[key] })\n      target._originalData = undefined\n    },\n    handleChange (value, key, column) {\n      const newData = [...this.data]\n      const target = newData.find(item => key === item.key)\n      if (target) {\n        target[column] = value\n        this.data = newData\n      }\n    },\n\n    // 最终全页面提交\n    validate () {\n      const { $refs: { repository, task }, $notification } = this\n      const repositoryForm = new Promise((resolve, reject) => {\n        repository.form.validateFields((err, values) => {\n          if (err) {\n            reject(err)\n            return\n          }\n          resolve(values)\n        })\n      })\n      const taskForm = new Promise((resolve, reject) => {\n        task.form.validateFields((err, values) => {\n          if (err) {\n            reject(err)\n            return\n          }\n          resolve(values)\n        })\n      })\n\n      // clean this.errors\n      this.errors = []\n      Promise.all([repositoryForm, taskForm]).then(values => {\n        $notification['error']({\n          message: 'Received values of form:',\n          description: JSON.stringify(values)\n        })\n      }).catch(() => {\n        const errors = Object.assign({}, repository.form.getFieldsError(), task.form.getFieldsError())\n        const tmp = { ...errors }\n        this.errorList(tmp)\n      })\n    },\n    errorList (errors) {\n      if (!errors || errors.length === 0) {\n        return\n      }\n      this.errors = Object.keys(errors)\n        .filter(key => errors[key])\n        .map(key => ({\n          key: key,\n          message: errors[key][0],\n          fieldLabel: fieldLabels[key]\n        }))\n    },\n    scrollToField (fieldKey) {\n      const labelNode = document.querySelector(`label[for=\"${fieldKey}\"]`)\n      if (labelNode) {\n        labelNode.scrollIntoView(true)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .card{\n    margin-bottom: 24px;\n  }\n  .popover-wrapper {\n    /deep/ .antd-pro-pages-forms-style-errorPopover .ant-popover-inner-content {\n      min-width: 256px;\n      max-height: 290px;\n      padding: 0;\n      overflow: auto;\n    }\n  }\n  .antd-pro-pages-forms-style-errorIcon {\n    user-select: none;\n    margin-right: 24px;\n    color: #f5222d;\n    cursor: pointer;\n    i {\n          margin-right: 4px;\n    }\n  }\n  .antd-pro-pages-forms-style-errorListItem {\n    padding: 8px 16px;\n    list-style: none;\n    border-bottom: 1px solid #e8e8e8;\n    cursor: pointer;\n    transition: all .3s;\n\n    &:hover {\n      background: #e6f7ff;\n    }\n    .antd-pro-pages-forms-style-errorIcon {\n      float: left;\n      margin-top: 4px;\n      margin-right: 12px;\n      padding-bottom: 22px;\n      color: #f5222d;\n    }\n    .antd-pro-pages-forms-style-errorField {\n      margin-top: 2px;\n      color: rgba(0,0,0,.45);\n      font-size: 12px;\n    }\n  }\n</style>\n"]}]}